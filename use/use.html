<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Use | Theengs gateway version_tag</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="apple-touch-icon" sizes="180x180" href=".apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/gateway/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/gateway/favicon-16x16.png">
    <link rel="manifest" href="/gateway/manifest.json">
    <link rel="mask-icon" href="/gateway/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="Multi platform MQTT gateway leveraging Theengs Decoder">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/favicon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/gateway/assets/css/0.styles.3354c299.css" as="style"><link rel="preload" href="/gateway/assets/js/app.2553f57f.js" as="script"><link rel="preload" href="/gateway/assets/js/2.ab17224a.js" as="script"><link rel="preload" href="/gateway/assets/js/8.077e7459.js" as="script"><link rel="prefetch" href="/gateway/assets/js/10.218403d0.js"><link rel="prefetch" href="/gateway/assets/js/11.a5a6b1e4.js"><link rel="prefetch" href="/gateway/assets/js/12.1474d263.js"><link rel="prefetch" href="/gateway/assets/js/13.b2ec5cda.js"><link rel="prefetch" href="/gateway/assets/js/14.b37505a0.js"><link rel="prefetch" href="/gateway/assets/js/15.a3840bd9.js"><link rel="prefetch" href="/gateway/assets/js/16.ee9ce57f.js"><link rel="prefetch" href="/gateway/assets/js/3.33955618.js"><link rel="prefetch" href="/gateway/assets/js/4.a421501e.js"><link rel="prefetch" href="/gateway/assets/js/5.df79ec50.js"><link rel="prefetch" href="/gateway/assets/js/6.f2257177.js"><link rel="prefetch" href="/gateway/assets/js/7.a4bfc159.js"><link rel="prefetch" href="/gateway/assets/js/9.75c933ff.js">
    <link rel="stylesheet" href="/gateway/assets/css/0.styles.3354c299.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/gateway/" class="home-link router-link-active"><!----> <span class="site-name">Theengs gateway version_tag</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://theengs.github.io/gateway" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gateway
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://theengs.github.io/decoder" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Decoder
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/theengs/gateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://theengs.github.io/gateway" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gateway
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://theengs.github.io/decoder" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Decoder
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/theengs/gateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/gateway/" aria-current="page" class="sidebar-link">0 - What is it for üè†</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1 - Prerequisitesüß≠</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/gateway/install/install.html" class="sidebar-link">2 - Install ‚úîÔ∏è</a></li><li><a href="/gateway/use/use.html" aria-current="page" class="active sidebar-link">3 - Use ‚úàÔ∏è</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/gateway/use/use.html#launching-the-gateway" class="sidebar-link">Launching the gateway</a></li><li class="sidebar-sub-header"><a href="/gateway/use/use.html#details-options" class="sidebar-link">Details options</a></li><li class="sidebar-sub-header"><a href="/gateway/use/use.html#publish-to-a-2-levels-topic" class="sidebar-link">Publish to a 2 levels topic</a></li><li class="sidebar-sub-header"><a href="/gateway/use/use.html#scan-every-55s" class="sidebar-link">Scan every 55s</a></li><li class="sidebar-sub-header"><a href="/gateway/use/use.html#configuration-record" class="sidebar-link">Configuration record</a></li><li class="sidebar-sub-header"><a href="/gateway/use/use.html#mqtttomqtt-decoding" class="sidebar-link">MQTTtoMQTT decoding</a></li></ul></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4 - Participate üíª</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="use"><a href="#use" class="header-anchor">#</a> Use</h1> <h2 id="launching-the-gateway"><a href="#launching-the-gateway" class="header-anchor">#</a> Launching the gateway</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>python -m TheengsGateway -H <span class="token string">&quot;192.168.1.17&quot;</span> -u <span class="token string">&quot;username&quot;</span> -p <span class="token string">&quot;password&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>192.168.1.17</code> being your MQTT broker IP address.</p> <p>Once the command launched you should see MQTT payloads appearing on the broker. To visualize these data you have to use an <a href="../prerequisites/broker">MQTT client tool</a>.</p> <p><img src="/gateway/assets/img/TheengsGateway_mqtt_explorer.beabd93e.png" alt="mqtt"></p> <p>Example payload received:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;F35285&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;F3:52:85&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;rssi&quot;</span><span class="token operator">:</span><span class="token number">-82</span><span class="token punctuation">,</span><span class="token property">&quot;brand&quot;</span><span class="token operator">:</span><span class="token string">&quot;BlueMaestro&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;TempoDisc&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;model_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;BM_V23&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;tempc&quot;</span><span class="token operator">:</span><span class="token number">24.1</span><span class="token punctuation">,</span><span class="token property">&quot;tempf&quot;</span><span class="token operator">:</span><span class="token number">75.38</span><span class="token punctuation">,</span><span class="token property">&quot;hum&quot;</span><span class="token operator">:</span><span class="token number">104.7</span><span class="token punctuation">,</span><span class="token property">&quot;dp&quot;</span><span class="token operator">:</span><span class="token number">24.8</span><span class="token punctuation">,</span><span class="token property">&quot;volt&quot;</span><span class="token operator">:</span><span class="token number">2.56</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="details-options"><a href="#details-options" class="header-anchor">#</a> Details options</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>1technophile<span class="token operator">&gt;</span>python -m TheengsGateway -h
usage: -m <span class="token punctuation">[</span>-h<span class="token punctuation">]</span> <span class="token punctuation">[</span>-H HOST<span class="token punctuation">]</span> <span class="token punctuation">[</span>-P PORT<span class="token punctuation">]</span> <span class="token punctuation">[</span>-u <span class="token environment constant">USER</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>-p <span class="token environment constant">PWD</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>-pt PUB_TOPIC<span class="token punctuation">]</span>
          <span class="token punctuation">[</span>-st SUB_TOPIC<span class="token punctuation">]</span> <span class="token punctuation">[</span>-pa PUBLISH_ALL<span class="token punctuation">]</span> <span class="token punctuation">[</span>-sd SCAN_DUR<span class="token punctuation">]</span> <span class="token punctuation">[</span>-tb TIME_BETWEEN<span class="token punctuation">]</span>
          <span class="token punctuation">[</span>-ll <span class="token punctuation">{</span>DEBUG,INFO,WARNING,ERROR,CRITICAL<span class="token punctuation">}</span><span class="token punctuation">]</span>

optional arguments:
  -h, --help            show this <span class="token builtin class-name">help</span> message and <span class="token builtin class-name">exit</span>
  -H HOST, --host HOST  MQTT <span class="token function">host</span> address
  -P PORT, --port PORT  MQTT <span class="token function">host</span> port
  -u <span class="token environment constant">USER</span>, --user <span class="token environment constant">USER</span>  MQTT username
  -p <span class="token environment constant">PWD</span>, --pass <span class="token environment constant">PWD</span>    MQTT password
  -pt PUB_TOPIC, --pub_topic PUB_TOPIC
                        MQTT publish topic
  -st SUB_TOPIC, --sub_topic SUB_TOPIC
                        MQTT subscribe topic
  -pa PUBLISH_ALL, --publish_all PUBLISH_ALL
                        Publish all beacons <span class="token keyword">if</span> <span class="token boolean">true</span>
  -sd SCAN_DUR, --scan_duration SCAN_DUR
                        BLE scan duration <span class="token punctuation">(</span>seconds<span class="token punctuation">)</span>
  -tb TIME_BETWEEN, --time_between TIME_BETWEEN
                        Seconds to <span class="token function">wait</span> between scans
  -ll <span class="token punctuation">{</span>DEBUG,INFO,WARNING,ERROR,CRITICAL<span class="token punctuation">}</span>, --log_level <span class="token punctuation">{</span>DEBUG,INFO,WARNING,ERROR,CRITICAL<span class="token punctuation">}</span>
                        TheengsGateway log level
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="publish-to-a-2-levels-topic"><a href="#publish-to-a-2-levels-topic" class="header-anchor">#</a> Publish to a 2 levels topic</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>python -m TheengsGateway -H <span class="token string">&quot;192.168.1.17&quot;</span> -u <span class="token string">&quot;username&quot;</span> -p <span class="token string">&quot;password&quot;</span> -pt <span class="token string">&quot;home/TheengsGateway&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="scan-every-55s"><a href="#scan-every-55s" class="header-anchor">#</a> Scan every 55s</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>python -m TheengsGateway -H <span class="token string">&quot;192.168.1.17&quot;</span> -u <span class="token string">&quot;username&quot;</span> -p <span class="token string">&quot;password&quot;</span> -pt <span class="token string">&quot;home/TheengsGateway&quot;</span> -tb <span class="token number">55</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="configuration-record"><a href="#configuration-record" class="header-anchor">#</a> Configuration record</h2> <p>Once you have entered your credentials and parameters they are saved into a configuration file <code>theengsgw.conf</code> into your user directory and you can simply launch the gateway by using:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>python -m TheengsGateway
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="mqtttomqtt-decoding"><a href="#mqtttomqtt-decoding" class="header-anchor">#</a> MQTTtoMQTT decoding</h2> <p>Messages sent to the subscribe topic can be used for decoding BLE data and will be published to the publish topic. This allows for offloading the decode operation from other devices, such as an ESP32, to enhance performance.</p> <p>The data sent to the topic is expected to be formatted in JSON and MUST have at least an &quot;id&quot; entry.</p> <p>Example message:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  &quot;id&quot;:&quot;54:94:5E:9F:64:C4&quot;,
  &quot;mac_type&quot;:1,
  &quot;manufacturerdata&quot;:&quot;4c0010060319247bbc68&quot;,
  &quot;rssi&quot;:-74,
  &quot;txpower&quot;:12
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>If possible, the data will be decoded and published.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/theengs/gateway/edit/development/docs/use/use.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/22/2022, 8:49:46 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/gateway/install/install.html" class="prev">
        2 - Install ‚úîÔ∏è
      </a></span> <span class="next"><a href="/gateway/participate/adding-decoders.html">
        Adding decoders
      </a>
      ‚Üí
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/gateway/assets/js/app.2553f57f.js" defer></script><script src="/gateway/assets/js/2.ab17224a.js" defer></script><script src="/gateway/assets/js/8.077e7459.js" defer></script>
  </body>
</html>
