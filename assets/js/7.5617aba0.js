(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{401:function(s,t,a){s.exports=a.p+"assets/img/TheengsGateway_mqtt_explorer.beabd93e.png"},418:function(s,t,a){"use strict";a.r(t);var n=a(56),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"use"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#use"}},[s._v("#")]),s._v(" Use")]),s._v(" "),n("h2",{attrs:{id:"launching-the-gateway"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#launching-the-gateway"}},[s._v("#")]),s._v(" Launching the gateway")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("python -m TheengsGateway -H "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.1.17"')]),s._v(" -u "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"username"')]),s._v(" -p "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("code",[s._v("192.168.1.17")]),s._v(" being your MQTT broker IP address.")]),s._v(" "),n("p",[s._v("Once the command launched you should see MQTT payloads appearing on the broker. To visualize these data you have to use an "),n("a",{attrs:{href:"../prerequisites/broker"}},[s._v("MQTT client tool")]),s._v(".")]),s._v(" "),n("p",[n("img",{attrs:{src:a(401),alt:"mqtt"}})]),s._v(" "),n("p",[s._v("Example payload received:")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"F35285"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"id"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"F3:52:85"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"rssi"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("-82")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"brand"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"BlueMaestro"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"model"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"TempoDisc"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"model_id"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"BM_V23"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"tempc"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"tempf"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("75.38")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hum"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("104.7")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dp"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.8")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"volt"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.56")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"details-options"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#details-options"}},[s._v("#")]),s._v(" Details options")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("C:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Users"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("1technophile"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("python -m TheengsGateway -h\nusage: -m "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-h"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-H HOST"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-P PORT"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-u "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-p "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PWD")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-pt PUB_TOPIC"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-st SUB_TOPIC"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-pa PUBLISH_ALL"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-sd SCAN_DUR"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-tb TIME_BETWEEN"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-ll "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("DEBUG,INFO,WARNING,ERROR,CRITICAL"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-Dt DISCOVERY_TOPIC"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-D DISCOVERY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-Dn DISCOVERY_DEVICE_NAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-Df DISCOVERY_FILTER "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("DISCOVERY_FILTER "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-a ADAPTER"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-s "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("active,passive"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\noptional arguments:\n  -h, --help            show this "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" message and "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n  -H HOST, --host HOST  MQTT "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" address\n  -P PORT, --port PORT  MQTT "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" port\n  -u "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(", --user "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("  MQTT username\n  -p "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PWD")]),s._v(", --pass "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PWD")]),s._v("    MQTT password\n  -pt PUB_TOPIC, --pub_topic PUB_TOPIC\n                        MQTT publish topic\n  -st SUB_TOPIC, --sub_topic SUB_TOPIC\n                        MQTT subscribe topic\n  -pa PUBLISH_ALL, --publish_all PUBLISH_ALL\n                        Enable"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" or disable"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" publishing of all beacons\n  -sd SCAN_DUR, --scan_duration SCAN_DUR\n                        BLE scan duration "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("seconds"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  -tb TIME_BETWEEN, --time_between TIME_BETWEEN\n                        Seconds to "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wait")]),s._v(" between scans\n  -ll "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("DEBUG,INFO,WARNING,ERROR,CRITICAL"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(", --log_level "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("DEBUG,INFO,WARNING,ERROR,CRITICAL"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                        TheengsGateway log level\n  -Dt DISCOVERY_TOPIC, --discovery-topic DISCOVERY_TOPIC\n                        MQTT Discovery topic\n  -D DISCOVERY, --discovery DISCOVERY\n                        Enable"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" or disable"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" MQTT discovery\n  -Dn DISCOVERY_DEVICE_NAME, --discovery_name DISCOVERY_DEVICE_NAME\n                        Device name "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Home Assistant\n  -Df DISCOVERY_FILTER "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("DISCOVERY_FILTER "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", --discovery_filter DISCOVERY_FILTER "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("DISCOVERY_FILTER "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n                        Device discovery filter list "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Home Assistant\n  -a ADAPTER, --adapter ADAPTER\n                        Bluetooth adapter "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e.g. hci1 on Linux"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  -s "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("active,passive"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(", --scanning_mode "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("active,passive"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                        Scanning mode "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: active"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br")])]),n("h2",{attrs:{id:"publish-to-a-2-levels-topic"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#publish-to-a-2-levels-topic"}},[s._v("#")]),s._v(" Publish to a 2 levels topic")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("python -m TheengsGateway -H "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.1.17"')]),s._v(" -u "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"username"')]),s._v(" -p "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),s._v(" -pt "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"home/TheengsGateway"')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"scan-every-55s"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#scan-every-55s"}},[s._v("#")]),s._v(" Scan every 55s")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("python -m TheengsGateway -H "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.1.17"')]),s._v(" -u "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"username"')]),s._v(" -p "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),s._v(" -pt "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"home/TheengsGateway"')]),s._v(" -tb "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("55")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"configuration-record"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#configuration-record"}},[s._v("#")]),s._v(" Configuration record")]),s._v(" "),n("p",[s._v("Once you have entered your credentials and parameters they are saved into a configuration file "),n("code",[s._v("theengsgw.conf")]),s._v(" into your user directory and you can simply launch the gateway by using:")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("python -m TheengsGateway\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"mqtttomqtt-decoding"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mqtttomqtt-decoding"}},[s._v("#")]),s._v(" MQTTtoMQTT decoding")]),s._v(" "),n("p",[s._v("Messages sent to the subscribe topic can be used for decoding BLE data and will be published to the publish topic. This allows for offloading the decode operation from other devices, such as an ESP32, to enhance performance.")]),s._v(" "),n("p",[s._v('The data sent to the topic is expected to be formatted in JSON and MUST have at least an "id" entry.')]),s._v(" "),n("p",[s._v("Example message:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n  "id":"54:94:5E:9F:64:C4",\n  "mac_type":1,\n  "manufacturerdata":"4c0010060319247bbc68",\n  "rssi":-74,\n  "txpower":12\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("If possible, the data will be decoded and published.")]),s._v(" "),n("h2",{attrs:{id:"home-assistant-auto-discovery"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#home-assistant-auto-discovery"}},[s._v("#")]),s._v(" Home Assistant auto discovery")]),s._v(" "),n("p",[s._v("If enabled (default), decoded devices will publish their configuration to Home Assistant to be discovered.")]),s._v(" "),n("ul",[n("li",[s._v("This can be enabled/disabled with the "),n("code",[s._v("-D")]),s._v(" or "),n("code",[s._v("--discovery")]),s._v(" command line argument with a value of 1 (enable) or 0 (disable).")]),s._v(" "),n("li",[s._v("The discovery topic can be set with the "),n("code",[s._v("-Dt")]),s._v(" or "),n("code",[s._v("--discovery_topic")]),s._v(" command line argument.")]),s._v(" "),n("li",[s._v("The discovery name can be set wit the "),n("code",[s._v("-Dn")]),s._v(" or "),n("code",[s._v("--discovery_name")]),s._v(" command line argument.")]),s._v(" "),n("li",[s._v("Devices can be filtered from discovery with the "),n("code",[s._v("-Df")]),s._v(" or "),n("code",[s._v("--discovery_filter")]),s._v(' argument which takes a list of device "model_id" to be filtered.')])]),s._v(" "),n("p",[s._v("The "),n("code",[s._v("IBEACON")]),s._v(", "),n("code",[s._v("GAEN")]),s._v(" and "),n("code",[s._v("MS-CDP")]),s._v(" devices are already filtered as their addresses (id's) change over time resulting in multiple discoveries.")]),s._v(" "),n("h2",{attrs:{id:"passive-scanning"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#passive-scanning"}},[s._v("#")]),s._v(" Passive scanning")]),s._v(" "),n("p",[s._v("Passive scanning ("),n("code",[s._v("-s passive")]),s._v(" or "),n("code",[s._v("--scanning_mode passive")]),s._v(") only works on Windows or Linux kernel >= 5.10 and BlueZ >= 5.56 with experimental features enabled.")]),s._v(" "),n("p",[s._v("To enable experimental features in BlueZ on a Linux distribution that uses systemd, run the following command:")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl edit bluetooth.service\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("Then add the following lines:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[Service]\nExecStart=\nExecStart=/usr/lib/bluetooth/bluetoothd --experimental\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("Save and close the file and then run the following commands:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo systemctl dameon-reload\nsudo systemctl restart bluetooth.service\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"time-synchronization"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#time-synchronization"}},[s._v("#")]),s._v(" Time synchronization")]),s._v(" "),n("p",[s._v("If the gateway finds LYWSD02 devices, it automatically synchronizes their time once a day. Therefore, make sure that your gateway's time is set correctly.")])])}),[],!1,null,null,null);t.default=e.exports}}]);